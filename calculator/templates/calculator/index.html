{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Cloth Roll Waste Management</title>
    <link rel="stylesheet" href="{% static 'calculator/style.css' %}">
</head>
<body>
    <div style="text-align:center; margin-bottom:20px;">
        <img src="{% static 'calculator/images/logo.jpeg' %}" alt="Logo" style="height:80px;">
        <h2>Cloth Roll Waste Management</h2>
    </div>

    <!-- Input form -->
    <form method="post">
        {% csrf_token %}
        <label>Cloth Name:</label>
        <input type="text" name="cloth_name" required value="{{ cloth_name|default:'' }}">

        <label>Total Cloth (m):</label>
        <input type="number" step="0.01" name="total" required value="{{ total|default:'' }}">

        <label>Door Size (m):</label>
        <input type="number" step="0.01" name="door" required value="{{ door|default:'' }}">

        <label>Window Size (m):</label>
        <input type="number" step="0.01" name="window" required value="{{ window|default:'' }}">

        <button type="submit">Calculate</button>
    </form>

    <!-- Results form -->
    {% if results %}
    <form method="post">
        {% csrf_token %}
        <!-- hidden fields -->
        <input type="hidden" name="cloth_name" value="{{ cloth_name }}">
        <input type="hidden" name="total" value="{{ total }}">
        <input type="hidden" name="door" value="{{ door }}">
        <input type="hidden" name="window" value="{{ window }}">

        <h3>Best Results</h3>
        <table>
            <tr>
                <th>Select</th>
                <th>Case</th>
                <th>Doors</th>
                <th>Windows</th>
                <th>Wastage</th>
            </tr>
            {% for key, val in results.items %}
            <tr>
                <td><input type="radio" name="selected_case" value="{{ key }}"></td>
                <td>{{ val.type }}</td>
                <td>{{ val.doors }}</td>
                <td>{{ val.windows }}</td>
                <td>{{ val.wastage }}</td>
            </tr>
            {% endfor %}
        </table>
        <button type="submit">Save Selected to Excel</button>
    </form>
    {% endif %}

    {% if message %}
        <p style="color:green; font-weight:bold;">{{ message }}</p>
    {% endif %}
</body>
</html>

